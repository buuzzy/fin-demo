积分管理
ShipAny 内置了一套积分管理系统，可以帮助开发者实现用户充值获取积分 / 使用服务扣除积分等逻辑。

并且给到用户一个积分管理页面，可以查看积分余额，积分消费记录。

credits

配置积分管理系统
创建数据表
请确保你已经 配置数据库，复制以下 SQL 语句，创建积分表。

data/install.sql

CREATE TABLE credits (
    id SERIAL PRIMARY KEY,
    trans_no VARCHAR(255) UNIQUE NOT NULL,
    created_at timestamptz,
    user_uuid VARCHAR(255) NOT NULL,
    trans_type VARCHAR(50) NOT NULL,
    credits INT NOT NULL,
    order_no VARCHAR(255),
    expired_at timestamptz
);
新增用户赠送积分
你可以按需修改以下逻辑，给新增用户赠送积分：

newuser-credits

充值积分
修改价格表配置，添加字段，即可实现充值购买积分，并为积分设置了有效期。

credits-pricing

消费扣除积分
你可以按需实现自己的积分扣除逻辑。比如在用户生成一张图片时，扣除 2 个积分，生成一个视频，扣除 3 个积分等。

扣除积分前，先判断用户的积分余额。如果余额不足，则提示用户去充值。

credits-cost

Last updated on 